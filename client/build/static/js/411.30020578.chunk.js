"use strict";(self.webpackChunkblood_donation_system=self.webpackChunkblood_donation_system||[]).push([[411],{6915:function(e,n,t){t.d(n,{OF:function(){return o},gA:function(){return u},oW:function(){return l},wH:function(){return s},xN:function(){return c}});var r=t(4569),i=t.n(r),a="http://localhost:8000/orders",o=function(e){return i().post(a+"/order-blood",e)},s=function(e){return i().delete(a+"?order_id=".concat(e))},l=function(e){return i().put(a,e)},c=function(e){return i().get(a+"?hospital_id=".concat(e))},u=function(e){return i().get(a+"?man_id=".concat(e))}},9781:function(e,n){n.Z=["A+","A-","B+","B-","AB+","AB-","0+","0-"]},7411:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var r=t(885),i=t(1889),a=t(2791),o=t(6915),s=t(5861),l=t(4942),c=t(1413),u=t(4687),d=t.n(u),h=t(890),x=t(8096),f=t(4925),p=t(8583),Z=t(3786),j=t(7391),m=t(6151),g=t(9781),v=t(2815),b=t(5881),_=t(6934),y=t(9276),C=(0,_.ZP)(y.Z)((function(e){e.theme;return{margin:"auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"0",width:"100%",maxWidth:"400px"}})),w=t(184);var P=function(e){var n=e.updateOrders,t=(0,a.useContext)(b.S).user,i=(0,a.useState)({blood_type:"0-",amount:1,hospital_id:"",man_id:""}),u=(0,r.Z)(i,2),_=u[0],y=u[1],P=function(e){var n=e.target,t=n.name,r=n.value;y((0,c.Z)((0,c.Z)({},_),{},(0,l.Z)({},t,r)))},k=function(){var e=(0,s.Z)(d().mark((function e(r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,(0,v.dI)();case 4:return i=e.sent,a=i.data.user_id,e.next=8,(0,o.OF)((0,c.Z)((0,c.Z)({},_),{},{hospital_id:t.user_id,man_id:a}));case 8:n(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}();return(0,w.jsxs)(C,{component:"form",children:[(0,w.jsx)(h.Z,{variant:"h5",gutterBottom:!0,component:"h2",children:"Order Blood"}),(0,w.jsxs)(x.Z,{fullWidth:!0,margin:"normal",children:[(0,w.jsx)(f.Z,{id:"select_blood_type",children:"Blood Type"}),(0,w.jsx)(p.Z,{labelId:"select_blood_type",id:"blood_type",name:"blood_type",onChange:function(e){return P(e)},required:!0,label:"Blood Type",variant:"standard",value:_.blood_type,children:g.Z.map((function(e){return(0,w.jsx)(Z.Z,{value:e,children:e},e)}))})]}),(0,w.jsx)(j.Z,{variant:"standard",fullWidth:!0,margin:"normal",label:"Amount (Unit: 0.5L)",name:"amount",onChange:P,type:"number",value:_.amount,required:!0}),(0,w.jsx)(m.Z,{fullWidth:!0,variant:"contained",color:"primary",onClick:k,children:"Submit"})]})},k=t(9281),S=t(9836),O=t(6890),B=t(5855),A=t(3994),D=t(3382),I=t(8582),W=t(3033),M=t(6711),H=t(3050),T=t(3967),q=t(8870),F=t(3400),L=t(2715),N=t(1133),U=t(5397),E=t(111);var J=function(e){var n=(0,T.Z)(),t=e.count,r=e.page,i=e.rowsPerPage,a=e.onPageChange;return(0,w.jsxs)(q.Z,{sx:{flexShrink:0,ml:2.5},children:[(0,w.jsx)(F.Z,{onClick:function(e){a(e,0)},disabled:0===r,"aria-label":"first page",children:"rtl"===n.direction?(0,w.jsx)(E.Z,{}):(0,w.jsx)(L.Z,{})}),(0,w.jsx)(F.Z,{onClick:function(e){a(e,r-1)},disabled:0===r,"aria-label":"previous page",children:"rtl"===n.direction?(0,w.jsx)(U.Z,{}):(0,w.jsx)(N.Z,{})}),(0,w.jsx)(F.Z,{onClick:function(e){a(e,r+1)},disabled:r>=Math.ceil(t/i)-1,"aria-label":"next page",children:"rtl"===n.direction?(0,w.jsx)(N.Z,{}):(0,w.jsx)(U.Z,{})}),(0,w.jsx)(F.Z,{onClick:function(e){a(e,Math.max(0,Math.ceil(t/i)-1))},disabled:r>=Math.ceil(t/i)-1,"aria-label":"last page",children:"rtl"===n.direction?(0,w.jsx)(L.Z,{}):(0,w.jsx)(E.Z,{})})]})};var R=function(e){var n=e.myOrders,t=e.updateOrders,i=(0,a.useContext)(H.J).theme.mode,s=(0,a.useState)(0),l=(0,r.Z)(s,2),c=l[0],u=l[1],d=(0,a.useState)(5),x=(0,r.Z)(d,2),f=x[0],p=x[1],Z=function(e){switch(e){case"approved":return"light"===i?"#6f8":"#052";case"rejected":return"light"===i?"#f91":"#600";default:return"light"===i?"#fdf":"#223"}};return(0,w.jsx)(y.Z,{width:"100%",children:(0,w.jsxs)(k.Z,{sx:{margin:"auto"},children:[(0,w.jsx)(h.Z,{variant:"h5",component:"h2",gutterBottom:!0,align:"center",children:"Order History"}),(0,w.jsxs)(S.Z,{"aria-label":"order history table",children:[(0,w.jsx)(O.Z,{children:(0,w.jsxs)(B.Z,{children:[(0,w.jsx)(A.Z,{children:"Type"}),(0,w.jsx)(A.Z,{children:"Units (0.5L)"}),(0,w.jsx)(A.Z,{children:"Date"}),(0,w.jsx)(A.Z,{children:"Status"}),(0,w.jsx)(A.Z,{children:"Cancel"})]})}),(0,w.jsx)(D.Z,{children:(f>0?n.slice(c*f,c*f+f):n).map((function(e){return(0,w.jsxs)(B.Z,{style:{backgroundColor:Z(e.state)},children:[(0,w.jsx)(A.Z,{children:e.blood_type}),(0,w.jsx)(A.Z,{children:e.amount}),(0,w.jsx)(A.Z,{children:new Date(e.order_date).toDateString()}),(0,w.jsx)(A.Z,{children:e.state}),(0,w.jsx)(A.Z,{children:"waiting"===e.state?(0,w.jsx)(M.Z,{onClick:function(){return n=e.order_id,void(0,o.wH)(n).then((function(){return t()})).catch((function(e){return console.error(e)}));var n},color:"error",sx:{cursor:"pointer"}}):null})]},e.order_id)}))}),(0,w.jsx)(I.Z,{children:(0,w.jsx)(B.Z,{children:(0,w.jsx)(W.Z,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],colSpan:5,count:n.length,rowsPerPage:f,page:c,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onPageChange:function(e,n){u(n)},onRowsPerPageChange:function(e){p(parseInt(e.target.value,10)),u(0)},ActionsComponent:J})})})]})]})})};var z=function(){var e=(0,a.useContext)(b.S).user,n=(0,a.useState)([]),t=(0,r.Z)(n,2),s=t[0],l=t[1];(0,a.useEffect)((function(){c()}),[e]);var c=function(){(0,o.xN)(e.user_id).then((function(e){return l(e.data)})).catch((function(e){return console.error(e.message)}))};return(0,w.jsxs)(i.ZP,{container:!0,spacing:4,children:[(0,w.jsx)(i.ZP,{item:!0,xs:12,lg:4,children:(0,w.jsx)(P,{updateOrders:c})}),(0,w.jsx)(i.ZP,{item:!0,xs:12,lg:8,display:"flex",alignItems:"center",justifyContent:"center",children:(0,w.jsx)(R,{myOrders:s,updateOrders:c})})]})}}}]);
//# sourceMappingURL=411.30020578.chunk.js.map