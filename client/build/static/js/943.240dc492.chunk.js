"use strict";(self.webpackChunkblood_donation_system=self.webpackChunkblood_donation_system||[]).push([[943],{6915:function(n,e,t){t.d(e,{OF:function(){return c},gA:function(){return a},oW:function(){return l},wH:function(){return s},xN:function(){return d}});var r=t(4569),o=t.n(r),i="http://localhost:8000/orders",c=function(n){return o().post(i+"/order-blood",n)},s=function(n){return o().delete(i+"?order_id=".concat(n))},l=function(n){return o().put(i,n)},d=function(n){return o().get(i+"?hospital_id=".concat(n))},a=function(n){return o().get(i+"?man_id=".concat(n))}},3943:function(n,e,t){t.r(e),t.d(e,{default:function(){return k}});var r=t(885),o=t(1889),i=t(2791),c=t(5351),s=t(6915),l=t(8870),d=t(890),a=t(9836),u=t(6890),h=t(5855),f=t(3994),x=t(3382),p=t(4942),Z=t(6934),j=t(9281),g=(0,Z.ZP)(j.Z)((function(n){var e,t=n.theme;return e={width:"100%",maxWidth:"240px",position:"fixed",top:88,right:25},(0,p.Z)(e,t.breakpoints.down("lg"),{position:"static"}),(0,p.Z)(e,"th",{borderBottom:"1px solid ".concat(t.palette.info.light)}),(0,p.Z)(e,"td",{padding:"15px",border:"1px solid ".concat(t.palette.info.light)}),e})),_=t(184);var b=function(n){var e=n.types;return(0,_.jsx)(l.Z,{children:(0,_.jsxs)(g,{children:[(0,_.jsx)(d.Z,{variant:"subtitle1",component:"h6",align:"center",gutterBottom:!0,children:"Blood Types"}),(0,_.jsxs)(a.Z,{"aria-label":"remaining blood types table",children:[(0,_.jsx)(u.Z,{children:(0,_.jsxs)(h.Z,{children:[(0,_.jsx)(f.Z,{align:"center",children:"Type"}),(0,_.jsx)(f.Z,{align:"center",children:"Units (0.5L)"})]})}),(0,_.jsx)(x.Z,{children:e.map((function(n){return(0,_.jsxs)(h.Z,{children:[(0,_.jsx)(f.Z,{align:"center",children:n.blood_type}),(0,_.jsx)(f.Z,{align:"center",children:n.num_of_blood})]},n.blood_type)}))})]})]})})},m=t(8946),v=t(3058);var y=function(n){var e=n.updateTables,t=n.orders,r=n.types;return(0,_.jsxs)(j.Z,{children:[(0,_.jsx)(d.Z,{variant:"subtitle1",component:"h6",align:"center",gutterBottom:!0,children:"Manage Orders"}),(0,_.jsxs)(a.Z,{"aria-label":"manage orders table",children:[(0,_.jsx)(u.Z,{children:(0,_.jsxs)(h.Z,{children:[(0,_.jsx)(f.Z,{children:"Hospital"}),(0,_.jsx)(f.Z,{children:"Type"}),(0,_.jsx)(f.Z,{children:"Units"}),(0,_.jsx)(f.Z,{children:"Order Date"}),(0,_.jsx)(f.Z,{align:"center",children:"Approve"}),(0,_.jsx)(f.Z,{align:"center",children:"Reject"})]})}),(0,_.jsx)(x.Z,{children:0!==t.length?t.map((function(n){var t=n.blood_type,o=n.amount,i=n.order_date,c=n.order_id,l=n.full_name;return(0,_.jsxs)(h.Z,{children:[(0,_.jsx)(f.Z,{children:l}),(0,_.jsx)(f.Z,{children:t}),(0,_.jsx)(f.Z,{children:o}),(0,_.jsx)(f.Z,{children:new Date(i).toLocaleDateString()}),(0,_.jsx)(f.Z,{align:"center",children:(0,_.jsx)(m.Z,{cursor:"pointer",color:"success",onClick:function(){return function(n){var t=n.order_id,o=n.amount,i=n.blood_type;r.filter((function(n){return n.blood_type===i}))[0].num_of_blood<o?alert("There is not enough blood available!"):(0,s.oW)({order_id:t,state:"approved"}).then((function(){return e()})).catch((function(n){return console.error(n)}))}({order_id:c,amount:o,blood_type:t})}})}),(0,_.jsx)(f.Z,{align:"center",children:(0,_.jsx)(v.Z,{cursor:"pointer",color:"error",onClick:function(){return function(n){var t=n.order_id;(0,s.oW)({order_id:t,state:"rejected"}).then((function(){return e()})).catch((function(n){return console.error(n)}))}({order_id:c,amount:o,blood_type:t})}})})]},c)})):(0,_.jsx)(h.Z,{children:(0,_.jsx)(f.Z,{align:"center",colSpan:6,children:"No orders to manage"})})})]})]})},C=t(5881);var k=function(){var n=(0,i.useContext)(C.S).user,e=(0,i.useState)([]),t=(0,r.Z)(e,2),l=t[0],d=t[1],a=(0,i.useState)([]),u=(0,r.Z)(a,2),h=u[0],f=u[1],x=(0,i.useState)(0),p=(0,r.Z)(x,2),Z=p[0],j=p[1];return(0,i.useEffect)((function(){(0,s.gA)(n.user_id).then((function(n){d(n.data)})).catch((function(n){return console.error(n)})),(0,c.q)().then((function(n){return f(n.data)})).catch((function(n){return console.error(n)}))}),[n.user_id,Z]),(0,_.jsxs)(o.ZP,{container:!0,spacing:4,children:[(0,_.jsx)(o.ZP,{item:!0,xs:12,lg:9,children:(0,_.jsx)(y,{orders:l,updateTables:function(){j((function(n){return n+1}))},types:h})}),(0,_.jsx)(o.ZP,{item:!0,xs:12,lg:3,display:"flex",alignItems:"center",justifyContent:"center",children:(0,_.jsx)(b,{types:h})})]})}},3058:function(n,e,t){var r=t(4836);e.Z=void 0;var o=r(t(5649)),i=t(184),c=(0,o.default)((0,i.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"}),"CancelOutlined");e.Z=c},8946:function(n,e,t){var r=t(4836);e.Z=void 0;var o=r(t(5649)),i=t(184),c=(0,o.default)((0,i.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline");e.Z=c}}]);
//# sourceMappingURL=943.240dc492.chunk.js.map